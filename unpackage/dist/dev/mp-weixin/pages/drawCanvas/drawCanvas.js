(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/drawCanvas/drawCanvas"],{86:
/*!*********************************************************************************************!*\
  !*** E:/Front-end/uni-app/challenge-cup/main.js?{"page":"pages%2FdrawCanvas%2FdrawCanvas"} ***!
  \*********************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){o(/*! uni-pages */4);i(o(/*! vue */2));var e=i(o(/*! ./pages/drawCanvas/drawCanvas.vue */87));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},87:
/*!**************************************************************************!*\
  !*** E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue ***!
  \**************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var i=o(/*! ./drawCanvas.vue?vue&type=template&id=622b7c74& */88),s=o(/*! ./drawCanvas.vue?vue&type=script&lang=js& */90);for(var r in s)"default"!==r&&function(t){o.d(e,t,(function(){return s[t]}))}(r);o(/*! ./drawCanvas.vue?vue&type=style&index=0&lang=scss& */93);var n,a=o(/*! ../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */11),c=Object(a["default"])(s["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],n);c.options.__file="pages/drawCanvas/drawCanvas.vue",e["default"]=c.exports},88:
/*!*********************************************************************************************************!*\
  !*** E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=template&id=622b7c74& ***!
  \*********************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e);var i=o(/*! -!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./drawCanvas.vue?vue&type=template&id=622b7c74& */89);o.d(e,"render",(function(){return i["render"]})),o.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),o.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),o.d(e,"components",(function(){return i["components"]}))},89:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=template&id=622b7c74& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";var i;o.r(e),o.d(e,"render",(function(){return s})),o.d(e,"staticRenderFns",(function(){return n})),o.d(e,"recyclableRender",(function(){return r})),o.d(e,"components",(function(){return i}));var s=function(){var t=this,e=t.$createElement;t._self._c},r=!1,n=[];s._withStripped=!0},90:
/*!***************************************************************************************************!*\
  !*** E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var i=o(/*! -!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./drawCanvas.vue?vue&type=script&lang=js& */91),s=o.n(i);for(var r in i)"default"!==r&&function(t){o.d(e,t,(function(){return i[t]}))}(r);e["default"]=s.a},91:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(/*! ../../common/util/util.js */92),s=function(){o.e(/*! require.ensure | components/toolbar/toolbar */"components/toolbar/toolbar").then(function(){return resolve(o(/*! ../../components/toolbar/toolbar.vue */204))}.bind(null,o)).catch(o.oe)},r=function(){o.e(/*! require.ensure | components/colorPanel/color-panel */"components/colorPanel/color-panel").then(function(){return resolve(o(/*! ../../components/colorPanel/color-panel.vue */211))}.bind(null,o)).catch(o.oe)},n={components:{Toolbar:s,ColorPanel:r},data:function(){return{testSrc:"../../static/img/drawCanvas/pikaqiu.png",backgroundImageSrc:"",colorPanelShow:!1,drawInfos:[],curDrawArr:[],startX:0,startY:0,drawContext:{},currentColor:"#091A22",begin:!1,bgColor:"white",toolArr:[{title:"清空",icon:"../../static/img/drawCanvas/tool_clear.png",selectIcon:"../../static/img/drawCanvas/tool_clear_s.png",select:!1,url:"clear"},{title:"橡皮",icon:"../../static/img/drawCanvas/tool_eraser.png",selectIcon:"../../static/img/drawCanvas/tool_eraser_s.png",select:!1,url:"eraser"},{title:"画笔",icon:"../../static/img/drawCanvas/tool_pen.png",selectIcon:"../../static/img/drawCanvas/tool_pen_s.png",select:!0,url:"pen"},{title:"颜色",icon:"../../static/img/drawCanvas/tool_color.png",selectIcon:"../../static/img/drawCanvas/tool_color_s.png",select:!1,url:"color"},{title:"矩形",icon:"../../static/img/drawCanvas/tool_rect.png",selectIcon:"../../static/img/drawCanvas/tool_rect_s.png",select:!1,url:"hollowRect"},{title:"圆形",icon:"../../static/img/drawCanvas/tool_circle.png",selectIcon:"../../static/img/drawCanvas/tool_circle_s.png",select:!1,url:"hollowCircle"},{title:"矩形",icon:"../../static/img/drawCanvas/tool_rect_solid.png",selectIcon:"../../static/img/drawCanvas/tool_rect_solid_s.png",select:!1,url:"rect"},{title:"圆形",icon:"../../static/img/drawCanvas/tool_circle_solid.png",selectIcon:"../../static/img/drawCanvas/tool_circle_solid_s.png",select:!1,url:"circle"},{title:"分享",icon:"../../static/img/drawCanvas/tool_share.png",selectIcon:"../../static/img/drawCanvas/tool_share_s.png",select:!1,url:"share"},{title:"保存",icon:"../../static/img/drawCanvas/tool_download.png",selectIcon:"../../static/img/drawCanvas/tool_download_s.png",select:!1,url:"save"}],lineWidth:6,penMode:!0,rectMode:!1,hollowRectMode:!1,circleMode:!1,hollowCircleMode:!1,lastHollowRect:{},lastHollowCircle:{}}},onLoad:function(e){this.backgroundImageSrc=e.backgroundImageSrc,this.drawContext=t.createCanvasContext("drawCanvas"),this.initBoard(),this.fillBackground(this.drawContext)},methods:{colorPickTapHandler:function(t){(0,i.customPrint)("我点击的颜色:"+JSON.stringify(t)),this.colorPanelShow=!1,this.toolArr.forEach((function(t){t.select=!1,"画笔"===t.title&&(t.select=!0)})),this.rectMode=!1,this.hollowRectMode=!1,this.circleMode=!1,this.hollowCircleMode=!1,this.penMode=!0,this.currentColor=t.color,this.drawContext.strokeStyle=t.color},penWidthChangeHandler:function(t){this.lineWidth=t,(0,i.customPrint)("画笔宽度:"+t),this.drawContext.setLineWidth(t)},toolItemTapHandler:function(e){var o=this,s=this.toolArr[e]["url"];switch(s){case"clear":this.clearDrawBoard();break;case"eraser":this.drawContext.strokeStyle=this.bgColor,this.colorPanelShow=!1;break;case"pen":this.drawContext.strokeStyle=this.currentColor,this.colorPanelShow=!1,this.rectMode=!1,this.hollowRectMode=!1,this.circleMode=!1,this.hollowCircleMode=!1,this.penMode=!0;break;case"color":this.colorPanelShow=!this.colorPanelShow;break;case"save":t.canvasToTempFilePath({canvasId:"drawCanvas",success:function(e){(0,i.customPrint)("回调参数:"+JSON.stringify(e)),t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(t){(0,i.customPrint)("成功回调参数:"+JSON.stringify(t)),o.$api.msgSuccess("保存成功")},fail:function(t){(0,i.customPrint)("失败回调参数:"+JSON.stringify(t))}})}});break;case"hollowRect":this.hollowRectMode=!0,this.rectMode=!1,this.circleMode=!1,this.hollowCircleMode=!1,this.penMode=!1,this.colorPanelShow=!1,this.drawContext.strokeStyle=this.currentColor;break;case"hollowCircle":this.hollowRectMode=!1,this.rectMode=!1,this.circleMode=!1,this.hollowCircleMode=!0,this.penMode=!1,this.colorPanelShow=!1,this.drawContext.strokeStyle=this.currentColor;break;case"rect":this.hollowRectMode=!1,this.rectMode=!0,this.circleMode=!1,this.hollowCircleMode=!1,this.penMode=!1,this.colorPanelShow=!1,this.drawContext.strokeStyle=this.currentColor;break;case"circle":this.hollowRectMode=!1,this.rectMode=!1,this.circleMode=!0,this.hollowCircleMode=!1,this.penMode=!1,this.colorPanelShow=!1,this.drawContext.strokeStyle=this.currentColor;break;default:break}"clear"!==s&&"save"!==s&&"share"!==s&&this.toolArr.forEach((function(t,o){t.select=!1,o===e&&(t.select=!0)}))},clearDrawBoard:function(){this.initBoard(),this.fillBackground(this.drawContext)},initBoard:function(){this.drawContext.setLineCap("round"),this.drawContext.strokeStyle=this.currentColor,this.drawContext.setLineWidth(this.lineWidth)},touchStart:function(t){(0,i.customPrint)("我能够进行绘制"),this.penMode?this.lineBegin(t.touches[0].x,t.touches[0].y):this.rectMode?this.rectBegin(t.touches[0].x,t.touches[0].y):this.hollowRectMode?this.hollowRectBegin(t.touches[0].x,t.touches[0].y):this.hollowCircleMode?this.hollowCircleBegin(t.touches[0].x,t.touches[0].y):this.circleMode&&this.circleBegin(t.touches[0].x,t.touches[0].y),this.curDrawArr.push({x:t.touches[0].x,y:t.touches[0].y})},touchMove:function(t){this.begin&&(this.penMode?(this.lineAddPoint(t.touches[0].x,t.touches[0].y),this.draw(!0)):this.rectMode?this.drawRect(t.touches[0].x,t.touches[0].y,!0):this.hollowRectMode?this.drawHollowRect(t.touches[0].x,t.touches[0].y,!0):this.hollowCircleMode?this.drawHollowCircle(t.touches[0].x,t.touches[0].y,!0):this.circleMode&&this.drawCircle(t.touches[0].x,t.touches[0].y,!0),this.curDrawArr.push({x:t.touches[0].x,y:t.touches[0].y}))},touchEnd:function(t){this.penMode?(this.curDrawArr=[],this.lineEnd()):this.rectMode?this.drawRect(t.changedTouches[0].x,t.changedTouches[0].y,!0):this.hollowRectMode?this.drawHollowRect(t.changedTouches[0].x,t.changedTouches[0].y,!0):this.hollowCircleMode?this.drawHollowCircle(t.changedTouches[0].x,t.changedTouches[0].y,!0):this.circleMode&&this.drawCircle(t.changedTouches[0].x,t.changedTouches[0].y,!0)},hollowRectBegin:function(t,e){this.begin=!0,this.drawContext.beginPath(),this.startX=t,this.startY=e},rectBegin:function(t,e){this.begin=!0,this.drawContext.beginPath(),this.startX=t,this.startY=e},hollowCircleBegin:function(t,e){this.begin=!0,this.drawContext.beginPath(),this.startX=t,this.startY=e},circleBegin:function(t,e){this.begin=!0,this.drawContext.beginPath(),this.startX=t,this.startY=e},drawRect:function(t,e,o){var i=t-this.startX?t-this.startX:this.startX-t,s=e-this.startY?e-this.startY:this.startY-e;this.drawContext.rect(this.startX,this.startY,i,s),this.drawContext.setFillStyle(this.currentColor),this.drawContext.fill(),this.draw(o)},drawHollowRect:function(t,e,o){var i={},s={},r={},n={};i.X=this.startX<=t?this.startX:t,i.Y=this.startY<=e?this.startY:e,s.X=this.startX>=t?this.startX:t,s.Y=this.startY>=e?this.startY:e,r.X=s.X,r.Y=i.Y,n.X=i.X,n.Y=s.Y;var a=t-this.startX?t-this.startX:this.startX-t,c=e-this.startY?e-this.startY:this.startY-e;this.drawContext.rect(this.startX,this.startY,a,c),this.drawContext.setStrokeStyle(this.currentColor),this.drawContext.stroke(),this.draw(o),this.lastHollowRect={x:this.startX,y:this.startY,width:Math.abs(a),height:Math.abs(c),pointLT:i},this.clearLastHollowRect()},clearLastHollowRect:function(){(0,i.customPrint)("上一个矩形对象:"+JSON.stringify(this.lastHollowRect)),this.drawContext.clearRect(this.lastHollowRect.pointLT.X+this.lineWidth/2,this.lastHollowRect.pointLT.Y+this.lineWidth/2,this.lastHollowRect.width-this.lineWidth,this.lastHollowRect.height-this.lineWidth)},clearLastHollowCircle:function(t,e,o,i){var s=1;function r(t,e,o){var n=o-s,a=Math.sqrt(o*o-n*n),c=t-n,l=e-a,h=2*n,d=2*a;s<=o&&(i.clearRect(c,l,h,d),s+=1,r(t,e,o))}r(t,e,o)},drawCircle:function(t,e,o){var i={},s={},r={},n={},a={};i.X=this.startX<=t?this.startX:t,i.Y=this.startY<=e?this.startY:e,s.X=this.startX>=t?this.startX:t,s.Y=this.startY>=e?this.startY:e,r.X=s.X,r.Y=i.Y,n.X=i.X,n.Y=s.Y,a.X=(s.X+i.X)/2,a.Y=(s.Y+i.Y)/2;var c=s.X-i.X,l=s.Y-i.Y,h=Math.sqrt(c*c+l*l)/2;this.drawContext.arc(a.X,a.Y,h,0,2*Math.PI),this.drawContext.setFillStyle(this.currentColor),this.drawContext.fill(),this.draw(o)},drawHollowCircle:function(t,e,o){var i={},s={},r={};i.X=this.startX<=t?this.startX:t,i.Y=this.startY<=e?this.startY:e,s.X=this.startX>=t?this.startX:t,s.Y=this.startY>=e?this.startY:e,r.X=(s.X+i.X)/2,r.Y=(s.Y+i.Y)/2;var n=s.X-i.X,a=s.Y-i.Y,c=Math.sqrt(n*n+a*a)/2;this.drawContext.arc(r.X,r.Y,c,0,2*Math.PI),this.drawContext.stroke(),this.drawContext.beginPath(),this.drawContext.arc(r.X,r.Y,c-this.lineWidth/2,0,2*Math.PI),this.drawContext.setFillStyle(this.bgColor),this.drawContext.fill(),this.draw(o)},lineBegin:function(t,e){this.begin=!0,this.drawContext.beginPath(),this.startX=t,this.startY=e,this.drawContext.moveTo(this.startX,this.startY),this.lineAddPoint(t,e)},lineAddPoint:function(t,e){this.drawContext.moveTo(this.startX,this.startY),this.drawContext.lineTo(t,e),this.drawContext.stroke(),this.startX=t,this.startY=e},lineEnd:function(){this.drawContext.closePath(),this.begin=!1},fillBackground:function(e){var o=this,i=t.createSelectorQuery().in(this);i.select(".board").boundingClientRect((function(t){e.setFillStyle("transparent"),e.fillRect(0,0,t.width,t.height),e.fill();var i=(t.width-318)/2,s=80;e.drawImage(o.backgroundImageSrc,i,s,318,288),e.draw()})).exec()},draw:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;this.drawContext.draw(t,(function(){e&&"function"==typeof e&&e()}))}}};e.default=n}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},93:
/*!************************************************************************************************************!*\
  !*** E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var i=o(/*! -!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./drawCanvas.vue?vue&type=style&index=0&lang=scss& */94),s=o.n(i);for(var r in i)"default"!==r&&function(t){o.d(e,t,(function(){return i[t]}))}(r);e["default"]=s.a},94:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/Front-end/uni-app/challenge-cup/pages/drawCanvas/drawCanvas.vue?vue&type=style&index=0&lang=scss& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){}},[[86,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/drawCanvas/drawCanvas.js.map