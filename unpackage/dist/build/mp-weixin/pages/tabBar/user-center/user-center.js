(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/user-center/user-center"],{"4ed0":function(n,e,t){"use strict";t.r(e);var u=t("fa50"),r=t.n(u);for(var a in u)"default"!==a&&function(n){t.d(e,n,(function(){return u[n]}))}(a);e["default"]=r.a},"8eb0":function(n,e,t){"use strict";var u=t("c880"),r=t.n(u);r.a},c880:function(n,e,t){},caeb:function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return u}));var u={uAvatar:function(){return t.e("uview-ui/components/u-avatar/u-avatar").then(t.bind(null,"47ec"))},uCellGroup:function(){return t.e("uview-ui/components/u-cell-group/u-cell-group").then(t.bind(null,"523b"))},uCellItem:function(){return t.e("uview-ui/components/u-cell-item/u-cell-item").then(t.bind(null,"3e20"))}},r=function(){var n=this,e=n.$createElement;n._self._c},a=[]},d59a:function(n,e,t){"use strict";t.r(e);var u=t("caeb"),r=t("4ed0");for(var a in r)"default"!==a&&function(n){t.d(e,n,(function(){return r[n]}))}(a);t("8eb0");var o,c=t("f0c5"),i=Object(c["a"])(r["default"],u["b"],u["c"],!1,null,null,null,!1,u["a"],o);e["default"]=i.exports},e5fc:function(n,e,t){"use strict";(function(n){t("e2fc");u(t("66fd"));var e=u(t("d59a"));function u(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},fa50:function(n,e,t){"use strict";(function(n,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(t("a34a"));function a(n){return n&&n.__esModule?n:{default:n}}function o(n,e,t,u,r,a,o){try{var c=n[a](o),i=c.value}catch(s){return void t(s)}c.done?e(i):Promise.resolve(i).then(u,r)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(u,r){var a=n.apply(e,t);function c(n){o(a,u,r,c,i,"next",n)}function i(n){o(a,u,r,c,i,"throw",n)}c(void 0)}))}}var i={data:function(){return{nickName:"未登录",avatar:"",userInfo:"这是easyChange",show:!0,charityFund:4399,coupon:3,option:[{id:1,icon:"star",title:"草稿箱"},{id:2,icon:"photo",title:"订单详情"},{id:3,icon:"coupon",title:"我的消费"}]}},onLoad:function(){this.init()},onPullDownRefresh:function(){this.init()},methods:{getUserInfo:function(){return c(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.getUserInfo({provider:"weixin",success:function(n){e(n.userInfo)},fail:function(n){console.log("授权失败"),t(n)}})})));case 1:case"end":return e.stop()}}),e)})))()},updateUser:function(e,t){u.callFunction({name:"user-center",data:{uniIdToken:e,action:"updateUser",params:{userInfo:t}},success:function(){n.setStorageSync("nickName",t.nickName),n.setStorageSync("avatar",t.avatarUrl)}})},updateInfo:function(){var e=this;return c(r.default.mark((function t(){var u,a,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u=n.getStorageSync("uni_id_token"),t.next=3,n.getSetting();case 3:if(a=t.sent,console.log(a),!a[1].authSetting["scope.userInfo"]){t.next=12;break}return t.next=8,e.getUserInfo();case 8:o=t.sent,e.updateUser(u,o),t.next=13;break;case 12:console.log("未授权");case 13:case"end":return t.stop()}}),t)})))()},init:function(){try{var e=n.getStorageSync("nickName"),t=n.getStorageSync("avatar");e&&(this.nickName=e),t&&(this.avatar=t)}catch(u){console.log(u)}}}};e.default=i}).call(this,t("543d")["default"],t("a9ff")["default"])}},[["e5fc","common/runtime","common/vendor"]]]);